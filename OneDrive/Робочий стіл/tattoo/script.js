// Объект со всеми переводами
const translations = {
    ru: {
        page_title_main: "Портфолио",
        hero_main_title: "TATTOOKIRILL YUVELIR",
        nav_about: "Обо мне",
        nav_services: "Услуги",
        nav_portfolio: "Работы",
        nav_process: "Процесс",
        nav_reviews: "Отзывы",
        nav_contact: "Контакты",
        hero_subtitle: "Tattoo Germany",
        hero_description_short: "Ваш мастер эксклюзивных татуировок",
        hero_contact_btn: "Связаться",
        about_title: "Обо мне",
        about_description_new: "Привет! Меня зовут Кирилл, я тату-мастер, и свой путь в этой профессии начал довольно рано — в 16 лет. Всё началось с моей первой татуировки, которую я сделал без разрешения родителей. Этот опыт перевернул моё восприятие: я понял, что татуировка — это не просто рисунок на теле, а настоящее искусство и способ самовыражения.",
        about_description_new_part2: "После этого я решил пойти на обучение и погрузился в мир татуировок всерьёз. С тех пор моя жизнь неразрывно связана с этой профессией. Я постоянно развиваюсь, пробую новые стили и техники, чтобы каждое моё тату было не просто работой, а уникальной историей, оставленной на теле человека.",
        services_title: "Услуги",
        service_realism_title: "Реализм",
        service_realism_description: "Создание детализированных и живых изображений, максимально приближенных к реальности.",
        service_japanese_title: "Японский стиль",
        service_japanese_description: "Традиционные японские мотивы: драконы, карпы кои, самураи и мифологические существа.",
        service_chicano_title: "Чикано",
        service_chicano_description: "Татуировки в стиле чикано: портреты женщин, надписи, карты и религиозные символы.",
        service_ornamental_title: "Орнаментал/Графика",
        service_ornamental_description: "Геометрические узоры, мандалы и сложные орнаменты.",
        service_mini_title: "Мини-тату",
        service_mini_description: "Маленькие и аккуратные татуировки с глубоким смыслом.",
        portfolio_title: "Мои работы",
        process_title: "Процесс создания",
        process_step1_title: "Консультация",
        process_step1_description: "Обсуждение вашей идеи, выбор стиля, размера и места для татуировки.",
        process_step2_title: "Разработка эскиза",
        process_step2_description: "Создание уникального эскиза, который полностью соответствует вашим пожеланиям.",
        process_step3_title: "Сеанс татуировки",
        process_step3_description: "Профессиональное и безопасное нанесение татуировки в стерильных условиях.",
        process_step4_title: "Уход и заживление",
        process_step4_description: "Рекомендации по уходу за новой татуировкой для быстрого и правильного заживления.",
        reviews_title: "Отзывы",
        review1_text: "\"Кирилл - настоящий профессионал! Моя татуировка превзошла все ожидания. Атмосфера в студии очень приятная и расслабляющая.\"",
        review1_author: "- Анна С.",
        review2_text: "\"Очень доволен результатом! Мастер внимательно выслушал все пожелания и воплотил мою идею в жизнь. Рекомендую всем!\"",
        review2_author: "- Иван К.",
        review3_text: "\"Татуировка зажила быстро и без проблем, благодаря четким инструкциям по уходу. Качество работы на высоте, обязательно вернусь еще!\"",
        review3_author: "- Елена В.",
        review4_text: "\"Фантастический опыт! Кирилл очень талантлив, а его студия чистая и комфортная. Я в восторге от своей новой татуировки.\"",
        review4_author: "- Максим З.",
        review5_text: "\"Думал, что будет больнее, но Кирилл работал очень аккуратно и бережно. Результат просто потрясающий, теперь у меня настоящее произведение искусства.\"",
        review5_author: "- Дарья Л.",
        review_form_title: "Оставьте свой отзыв",
        review_form_name_placeholder: "Ваше имя",
        review_form_text_placeholder: "Ваш отзыв",
        review_form_submit_btn: "Отправить отзыв",
        contact_title: "Контакты",
        contact_intro: "Свяжитесь со мной для записи или консультации:",
        footer_rights: "Все права защищены."
    },
    uk: {
        page_title_main: "Портфоліо",
        hero_main_title: "TATTOOKIRILL YUVELIR",
        nav_about: "Про мене",
        nav_services: "Послуги",
        nav_portfolio: "Роботи",
        nav_process: "Процес",
        nav_reviews: "Відгуки",
        nav_contact: "Контакти",
        hero_subtitle: "Tattoo Germany",
        hero_description_short: "Ваш майстер ексклюзивних татуювань",
        hero_contact_btn: "Зв'язатися",
        about_title: "Про мене",
        about_description_new: "Привіт! Мене звати Кирило, я тату-майстер, і свій шлях у цій професії почав досить рано — у 16 років. Усе почалося з мого першого татуювання, яке я зробив без дозволу батьків. Цей досвід перевернув моє сприйняття: я зрозумів, що татуювання — це не просто малюнок на тілі, а справжнє мистецтво і спосіб самовираження.",
        about_description_new_part2: "Після цього я вирішив піти на навчання і занурився у світ татуювань всерйоз. З того часу моя життя нерозривно пов'язане з цією професією. Я постійно розвиваюся, пробую нові стилі та техніки, щоб кожне моє тату було не просто роботою, а унікальною історією, залишеною на тілі людини.",
        services_title: "Послуги",
        service_realism_title: "Реалізм",
        service_realism_description: "Створення деталізованих та живих зображень, максимально наближених до реальності.",
        service_japanese_title: "Японський стиль",
        service_japanese_description: "Традиційні японські мотиви: дракони, коропи коі, самураї та міфологічні істоти.",
        service_chicano_title: "Чікано",
        service_chicano_description: "Татуювання в стилі чікано: портрети жінок, написи, карти та релігійні символи.",
        service_ornamental_title: "Орнаментал/Графіка",
        service_ornamental_description: "Геометричні візерунки, мандали та складні орнаменти.",
        service_mini_title: "Міні-тату",
        service_mini_description: "Маленькі та акуратні татуювання з глибоким змістом.",
        portfolio_title: "Мої роботи",
        process_title: "Процес створення",
        process_step1_title: "Консультація",
        process_step1_description: "Обговорення вашої ідеї, вибір стилю, розміру та місця для татуювання.",
        process_step2_title: "Розробка ескізу",
        process_step2_description: "Створення унікального ескізу, який повністю відповідає вашим побажанням.",
        process_step3_title: "Сеанс татуювання",
        process_step3_description: "Професійне та безпечне нанесення татуювання в стерильних умовах.",
        process_step4_title: "Догляд та загоєння",
        process_step4_description: "Рекомендації щодо догляду за новим татуюванням для швидкого та правильного загоєння.",
        reviews_title: "Відгуки",
        review1_text: "\"Кирило - справжній професіонал! Моє татуювання перевершило всі очікування. Атмосфера в студії дуже приємна та розслаблююча.\"",
        review1_author: "- Анна С.",
        review2_text: "\"Дуже задоволений результатом! Майстер уважно вислухав усі побажання і втілив мою ідею в життя. Рекомендую всім!\"",
        review2_author: "- Іван К.",
        review3_text: "\"Татуювання зажило швидко і без проблем, завдяки чітким інструкціям по догляду. Якість роботи на висоті, обов'язково повернуся ще!\"",
        review3_author: "- Олена В.",
        review4_text: "\"Фантастичний досвід! Кирило дуже талановитий, а його студія чиста та комфортна. Я в захваті від свого нового татуювання.\"",
        review4_author: "- Максим З.",
        review5_text: "\"Думав, що буде болючіше, але Кирило працював дуже акуратно і дбайливо. Результат просто приголомшливий, тепер у мене справжній витвір мистецтва.\"",
        review5_author: "- Дарина Л.",
        review_form_title: "Залишіть свій відгук",
        review_form_name_placeholder: "Ваше ім'я",
        review_form_text_placeholder: "Ваш відгук",
        review_form_submit_btn: "Надіслати відгук",
        contact_title: "Контакти",
        contact_intro: "Зв'яжіться зі мною для запису або консультації:",
        footer_rights: "Усі права захищені."
    },
    en: {
        page_title_main: "Portfolio",
        hero_main_title: "TATTOOKIRILL YUVELIR",
        nav_about: "About",
        nav_services: "Services",
        nav_portfolio: "Works",
        nav_process: "Process",
        nav_reviews: "Reviews",
        nav_contact: "Contact",
        hero_subtitle: "Tattoo Germany",
        hero_description_short: "Your master of exclusive tattoos",
        hero_contact_btn: "Contact Me",
        about_title: "About Me",
        about_description_new: "Hi! My name is Kirill, I'm a tattoo artist, and I started my journey in this profession quite early — at 16. It all began with my first tattoo, which I got without my parents' permission. This experience completely changed my perception: I realized that tattooing is not just a drawing on the body, but a true art and a way of self-expression.",
        about_description_new_part2: "After that, I decided to pursue formal training and deeply immersed myself in the world of tattoos. Since then, my life has been inextricably linked with this profession. I constantly develop, try new styles and techniques so that each of my tattoos is not just a job, but a unique story etched on a person's body.",
        services_title: "Services",
        service_realism_title: "Realism",
        service_realism_description: "Creating detailed and lifelike images, as close to reality as possible.",
        service_japanese_title: "Japanese Style",
        service_japanese_description: "Traditional Japanese motifs: dragons, koi fish, samurai, and mythological creatures.",
        service_chicano_title: "Chicano",
        service_chicano_description: "Chicano style tattoos: portraits of women, lettering, cards, and religious symbols.",
        service_ornamental_title: "Ornamental/Graphic",
        service_ornamental_description: "Geometric patterns, mandalas, and complex ornaments.",
        service_mini_title: "Mini-Tattoo",
        service_mini_description: "Small and neat tattoos with deep meaning.",
        portfolio_title: "My Works",
        process_title: "Creation Process",
        process_step1_title: "Consultation",
        process_step1_description: "Discussing your idea, choosing the style, size, and placement for the tattoo.",
        process_step2_title: "Sketch Development",
        process_step2_description: "Creating a unique sketch that fully meets your wishes.",
        process_step3_title: "Tattoo Session",
        process_step3_description: "Professional and safe tattooing in a sterile environment.",
        process_step4_title: "Care and Healing",
        process_step4_description: "Recommendations for caring for your new tattoo for quick and proper healing.",
        reviews_title: "Reviews",
        review1_text: "\"Kirill is a true professional! My tattoo exceeded all expectations. The atmosphere in the studio is very pleasant and relaxing.\"",
        review1_author: "- Anna S.",
        review2_text: "\"Very satisfied with the result! The master carefully listened to all wishes and brought my idea to life. I recommend it to everyone!\"",
        review2_author: "- Ivan K.",
        review3_text: "\"The tattoo healed quickly and without problems, thanks to clear care instructions. The quality of work is top-notch, I will definitely come back!\"",
        review3_author: "- Elena V.",
        review4_text: "\"Fantastic experience! Kirill is very talented, and his studio is clean and comfortable. I am thrilled with my new tattoo.\"",
        review4_author: "- Max Z.",
        review5_text: "\"I thought it would be more painful, but Kirill worked very carefully and gently. The result is simply stunning, now I have a true work of art.\"",
        review5_author: "- Daria L.",
        review_form_title: "Leave your review",
        review_form_name_placeholder: "Your Name",
        review_form_text_placeholder: "Your Review",
        review_form_submit_btn: "Submit Review",
        contact_title: "Contact",
        contact_intro: "Contact me for an appointment or consultation:",
        footer_rights: "All rights reserved."
    },
    de: {
        page_title_main: "Portfolio",
        hero_main_title: "TATTOOKIRILL YUVELIR",
        nav_about: "Über mich",
        nav_services: "Dienstleistungen",
        nav_portfolio: "Arbeiten",
        nav_process: "Prozess",
        nav_reviews: "Bewertungen",
        nav_contact: "Kontakt",
        hero_subtitle: "Tattoo Deutschland",
        hero_description_short: "Ihr Meister für exklusive Tattoos",
        hero_contact_btn: "Kontaktieren Sie mich",
        about_title: "Über mich",
        about_description_new: "Hallo! Mein Name ist Kirill, ich bin Tätowierer und habe meine Reise in diesem Beruf recht früh begonnen – mit 16 Jahren. Alles begann mit meiner ersten Tätowierung, die ich ohne Erlaubnis meiner Eltern anfertigte. Diese Erfahrung hat meine Wahrnehmung komplett verändert: Ich verstand, dass Tätowierung nicht nur ein Bild auf dem Körper ist, sondern eine wahre Kunst und Ausdrucksform.",
        about_description_new_part2: "Danach beschloss ich, eine Ausbildung zu absolvieren und tauchte ernsthaft in die Welt der Tattoos ein. Seitdem ist mein Leben untrennbar mit diesem Beruf verbunden. Ich entwickle mich ständig weiter, probiere neue Stile und Techniken aus, damit jede meiner Tattoos nicht nur eine Arbeit, sondern eine einzigartige Geschichte ist, die auf dem Körper eines Menschen hinterlassen wird.",
        services_title: "Dienstleistungen",
        service_realism_title: "Realismus",
        service_realism_description: "Erstellung detaillierter und lebensechter Bilder, die der Realität maximal nahekommen.",
        service_japanese_title: "Japanischer Stil",
        service_japanese_description: "Traditionelle japanische Motive: Drachen, Koi-Karpfen, Samurai und mythologische Kreaturen.",
        service_chicano_title: "Chicano",
        service_chicano_description: "Tattoos im Chicano-Stil: Porträts von Frauen, Schriftzüge, Karten und religiöse Symbole.",
        service_ornamental_title: "Ornamental/Grafik",
        service_ornamental_description: "Geometrische Muster, Mandalas und komplexe Ornamente.",
        service_mini_title: "Mini-Tattoo",
        service_mini_description: "Kleine und präzise Tattoos mit tiefer Bedeutung.",
        portfolio_title: "Meine Arbeiten",
        process_title: "Entstehungsprozess",
        process_step1_title: "Beratung",
        process_step1_description: "Besprechung Ihrer Idee, Auswahl von Stil, Größe und Platzierung der Tätowierung.",
        process_step2_title: "Entwurfserstellung",
        process_step2_description: "Erstellung eines einzigartigen Entwurfs, der Ihren Wünschen vollständig entspricht.",
        process_step3_title: "Tätowiersitzung",
        process_step3_description: "Professionelles und sicheres Tätowieren unter sterilen Bedingungen.",
        process_step4_title: "Pflege und Heilung",
        process_step4_description: "Empfehlungen zur Pflege der neuen Tätowierung für eine schnelle und korrekte Heilung.",
        reviews_title: "Bewertungen",
        review1_text: "\"Kirill ist ein echter Profi! Mein Tattoo hat alle Erwartungen übertroffen. Die Atmosphäre im Studio ist sehr angenehm und entspannend.\"",
        review1_author: "- Anna S.",
        review2_text: "\"Sehr zufrieden mit dem Ergebnis! Der Meister hat sich alle Wünsche genau angehört und meine Idee umgesetzt. Ich empfehle es jedem!\"",
        review2_author: "- Ivan K.",
        review3_text: "\"Das Tattoo ist schnell und problemlos verheilt, dank klarer Pflegehinweise. Die Qualität der Arbeit ist top, ich komme auf jeden Fall wieder!\"",
        review3_author: "- Elena V.",
        review4_text: "\"Fantastisches Erlebnis! Kirill ist sehr talentiert und sein Studio ist sauber und komfortabel. Ich bin begeistert von meinem neuen Tattoo.\"",
        review4_author: "- Max Z.",
        review5_text: "\"Ich dachte, es würde schmerzhafter sein, aber Kirill hat sehr sorgfältig und behutsam gearbeitet. Das Ergebnis ist einfach atemberaubend, jetzt habe ich ein echtes Kunstwerk.\"",
        review5_author: "- Daria L.",
        review_form_title: "Hinterlassen Sie Ihre Bewertung",
        review_form_name_placeholder: "Ihr Name",
        review_form_text_placeholder: "Ihre Bewertung",
        review_form_submit_btn: "Bewertung absenden",
        contact_title: "Kontakt",
        contact_intro: "Kontaktieren Sie mich für einen Termin oder eine Beratung:",
        footer_rights: "Alle Rechte vorbehalten."
    }
};

let currentLang = localStorage.getItem('currentLang') || 'ru'; // Загружаем из localStorage или по умолчанию 'ru'

document.addEventListener('DOMContentLoaded', () => {
    // Инициализация AOS (Animate On Scroll)
    AOS.init({
        duration: 1000,
        once: true,
    });

    // --- Language Switcher ---
    const langToggleBtn = document.querySelector('.lang-toggle-btn');
    const langDropdown = document.querySelector('.lang-dropdown');
    const langButtons = document.querySelectorAll('.lang-btn');
    const currentLangText = document.getElementById('currentLangText');

    // Функция для применения переводов
    const applyTranslations = (lang) => {
        document.querySelectorAll('[data-lang-key]').forEach(element => {
            const key = element.getAttribute('data-lang-key');
            if (translations[lang] && translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });
        currentLangText.textContent = lang.toUpperCase();
        document.documentElement.lang = lang; // Устанавливаем атрибут lang для HTML
        // Обновляем плейсхолдеры для формы отзывов
        document.getElementById('reviewerName').placeholder = translations[lang].review_form_name_placeholder;
        document.getElementById('reviewText').placeholder = translations[lang].review_form_text_placeholder;
    };

    // Применить язык при загрузке страницы
    applyTranslations(currentLang);

    langToggleBtn.addEventListener('click', (event) => {
        event.stopPropagation(); // Предотвращаем закрытие при клике по кнопке
        langDropdown.classList.toggle('show');
    });

    langButtons.forEach(button => {
        button.addEventListener('click', (event) => {
            currentLang = event.target.dataset.lang;
            localStorage.setItem('currentLang', currentLang); // Сохраняем выбранный язык
            applyTranslations(currentLang);
            langDropdown.classList.remove('show');
        });
    });

    // Закрывать выпадающий список при клике вне его
    window.addEventListener('click', (event) => {
        if (!event.target.closest('.language-switcher')) {
            langDropdown.classList.remove('show');
        }
    });

    // --- Hamburger Menu ---
    const hamburgerMenu = document.querySelector('.hamburger-menu');
    const mainNav = document.querySelector('.main-nav');

    hamburgerMenu.addEventListener('click', () => {
        hamburgerMenu.classList.toggle('active');
        mainNav.classList.toggle('open');
        mainNav.classList.toggle('mobile-active'); // Добавляем класс для мобильных стилей
    });

    // Закрывать меню при клике по ссылке в мобильной версии
    document.querySelectorAll('.main-nav ul li a').forEach(item => {
        item.addEventListener('click', () => {
            if (mainNav.classList.contains('mobile-active')) {
                hamburgerMenu.classList.remove('active');
                mainNav.classList.remove('open');
                mainNav.classList.remove('mobile-active');
            }
        });
    });

    // --- Portfolio Lightbox ---
    const galleryItems = document.querySelectorAll('.portfolio-swiper .swiper-slide img'); // Обновленный селектор
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const closeBtn = document.querySelector('.lightbox-close');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    const galleryImages = Array.from(galleryItems); // Преобразуем в массив для легкой навигации
    let currentImageIndex;

    galleryItems.forEach((img, index) => {
        img.addEventListener('click', () => {
            currentImageIndex = index;
            showImage(currentImageIndex);
        });
    });

    closeBtn.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
            closeLightbox();
        }
    });

    prevBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // Предотвратить закрытие лайтбокса
        showPrevImage();
    });
    nextBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // Предотвратить закрытие лайтбокса
        showNextImage();
    });

    document.addEventListener('keydown', (e) => {
        if (lightbox.classList.contains('active')) {
            if (e.key === 'ArrowLeft') {
                showPrevImage();
            } else if (e.key === 'ArrowRight') {
                showNextImage();
            } else if (e.key === 'Escape') {
                closeLightbox();
            }
        }
    });

    function showImage(index) {
        if (galleryImages.length > 0) {
            lightboxImg.src = galleryImages[index].src;
            lightbox.classList.add('active');
            // При открытии лайтбокса запрещаем прокрутку body
            document.body.style.overflow = 'hidden'; 
        }
    }

    function closeLightbox() {
        lightbox.classList.remove('active');
        lightboxImg.src = ''; // Очищаем источник изображения
        // При закрытии лайтбокса восстанавливаем прокрутку body
        document.body.style.overflow = '';
    }

    function showPrevImage() {
        currentImageIndex = (currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
        showImage(currentImageIndex);
    }

    function showNextImage() {
        currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
        showImage(currentImageIndex);
    }

    // --- Scroll to Top/Bottom Buttons ---
    const scrollToTopBtn = document.getElementById('scrollToTopBtn');
    const scrollToBottomBtn = document.getElementById('scrollToBottomBtn');

    window.addEventListener('scroll', () => {
        if (window.scrollY > 200) {
            scrollToTopBtn.style.display = 'flex'; // Show button
        } else {
            scrollToTopBtn.style.display = 'none'; // Hide button
        }

        // Show scroll-to-bottom button only if not at the very bottom
        // Adjusted threshold for 'bottom' to make it less sensitive near the very end
        const scrollThreshold = 100; // Pixels from the bottom
        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - scrollThreshold) {
            scrollToBottomBtn.style.display = 'none';
        } else {
            scrollToBottomBtn.style.display = 'flex';
        }
    });

    scrollToTopBtn.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    scrollToBottomBtn.addEventListener('click', () => {
        window.scrollTo({
            top: document.body.scrollHeight,
            behavior: 'smooth'
        });
    });

    // --- Swiper.js Carousels ---

    // Services Swiper
    new Swiper('.services-swiper', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        loop: true,
        slidesPerView: 'auto', // Автоматическое определение количества видимых слайдов
        coverflowEffect: {
            rotate: 20, // Поворот слайдов
            stretch: 0,
            depth: 100, // Глубина
            modifier: 1,
            slideShadows: true,
        },
        autoplay: {
            delay: 4000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        breakpoints: {
            768: {
                slidesPerView: 3, // 3 слайда на экранах от 768px
                coverflowEffect: {
                    rotate: 20,
                    stretch: 0,
                    depth: 150,
                    modifier: 1,
                    slideShadows: true,
                },
            },
            1024: {
                slidesPerView: 3, // 3 слайда на экранах от 1024px
                coverflowEffect: {
                    rotate: 30,
                    stretch: 0,
                    depth: 200,
                    modifier: 1,
                    slideShadows: true,
                },
            },
        },
    });

    // Portfolio Swiper
    new Swiper('.portfolio-swiper', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        loop: true,
        slidesPerView: 'auto',
        coverflowEffect: {
            rotate: 20,
            stretch: 0,
            depth: 100,
            modifier: 1,
            slideShadows: true,
        },
        autoplay: {
            delay: 3500,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        breakpoints: {
            768: {
                slidesPerView: 3,
                coverflowEffect: {
                    rotate: 20,
                    stretch: 0,
                    depth: 150,
                    modifier: 1,
                    slideShadows: true,
                },
            },
            1024: {
                slidesPerView: 4, // Больше слайдов для портфолио
                coverflowEffect: {
                    rotate: 30,
                    stretch: 0,
                    depth: 200,
                    modifier: 1,
                    slideShadows: true,
                },
            },
        },
    });

    // Process Swiper
    new Swiper('.process-swiper', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        loop: true,
        slidesPerView: 'auto',
        coverflowEffect: {
            rotate: 20,
            stretch: 0,
            depth: 100,
            modifier: 1,
            slideShadows: true,
        },
        autoplay: {
            delay: 4500,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        breakpoints: {
            768: {
                slidesPerView: 3,
                coverflowEffect: {
                    rotate: 20,
                    stretch: 0,
                    depth: 150,
                    modifier: 1,
                    slideShadows: true,
                },
            },
            1024: {
                slidesPerView: 4,
                coverflowEffect: {
                    rotate: 30,
                    stretch: 0,
                    depth: 200,
                    modifier: 1,
                    slideShadows: true,
                },
            },
        },
    });

    // Reviews Swiper (slightly different settings for text content)
    new Swiper('.reviews-swiper', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        loop: true,
        slidesPerView: 'auto',
        coverflowEffect: {
            rotate: 0, // Без поворота для отзывов
            stretch: 0,
            depth: 0,
            modifier: 1,
            slideShadows: false, // Без тени для более чистого вида
        },
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        breakpoints: {
            768: {
                slidesPerView: 2,
            },
            1024: {
                slidesPerView: 3,
            },
        },
    });


    // --- Parallax Background Effect ---
    const body = document.body;
    let initialScrollY = window.scrollY;

    window.addEventListener('scroll', () => {
        const scrolled = window.scrollY;
        // Чувствительность параллакса (чем меньше число, тем сильнее эффект)
        const parallaxSpeed = 0.2; 
        const translateY = scrolled * parallaxSpeed;
        
        // Применяем эффект к псевдоэлементу ::before
        // Используем transform для лучшей производительности
        document.body.style.setProperty('--bg-translateY', `-${translateY}px`);
    });

    // Добавляем переменную в CSS для использования в transform
    // Для этого нужно добавить в style.css:
    // body::before {
    //     transform: translateY(var(--bg-translateY, 0));
    // }
    // (Я уже добавил это в предоставленный style.css)

    // --- Review Form Submission (Client-side only for now) ---
    const reviewForm = document.querySelector('.review-form');
    if (reviewForm) {
        reviewForm.addEventListener('submit', (e) => {
            e.preventDefault(); // Предотвращаем стандартную отправку формы

            const reviewerName = document.getElementById('reviewerName').value;
            const reviewText = document.getElementById('reviewText').value;

            if (reviewerName && reviewText) {
                // В реальном проекте здесь будет отправка данных на сервер (AJAX/Fetch API)
                // Пример:
                // fetch('/submit-review', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json',
                //     },
                //     body: JSON.stringify({ name: reviewerName, review: reviewText }),
                // })
                // .then(response => response.json())
                // .then(data => {
                //     alert('Отзыв успешно отправлен!');
                //     reviewForm.reset();
                //     // Возможно, обновить карусель отзывов, если они динамически загружаются
                // })
                // .catch(error => {
                //     console.error('Ошибка при отправке отзыва:', error);
                //     alert('Произошла ошибка при отправке отзыва.');
                // });

                // Для демонстрации: просто выводим в консоль и очищаем форму
                console.log('Новый отзыв:', { name: reviewerName, review: reviewText });
                alert(translations[currentLang].review_form_submit_success || "Спасибо за ваш отзыв! Он будет опубликован после проверки.");
                reviewForm.reset();
            } else {
                alert(translations[currentLang].review_form_fill_fields || "Пожалуйста, заполните все поля.");
            }
        });
    }
});
